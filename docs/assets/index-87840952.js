import{d as y,r as S,h as G,c as v,I as L,o as z,p as Q,w as ue,a as de,b as x,H as R,T as ce,F as M,t as ee,e as te,i as K,f as pe,N as X,u as N,g as I,j as D,m as fe,O as F,k as T,l as ae,n as f,q as k,s as $,v as r,x as A,y as c,z as B,A as O,B as me,C as V,D as se,M as xe,E as ve,G as H,J as Y,P as ge,K as be,_ as he,L as Z,Q as ye}from"./index-5cd8a124.js";import{a as _e,f as le}from"./hidden-028e08bf.js";function ke(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(i=>setTimeout(()=>{throw i}))}let we=y({props:{onFocus:{type:Function,required:!0}},setup(e){let i=S(!0);return()=>i.value?G(le,{as:"button",type:"button",features:_e.Focusable,onFocus(l){l.preventDefault();let d,o=50;function a(){var s;if(o--<=0){d&&cancelAnimationFrame(d);return}if((s=e.onFocus)!=null&&s.call(e)){i.value=!1,cancelAnimationFrame(d);return}d=requestAnimationFrame(a)}d=requestAnimationFrame(a)}}):null}});var Ie=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ie||{}),Te=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(Te||{});let ne=Symbol("TabsContext");function q(e){let i=K(ne,null);if(i===null){let l=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,q),l}return i}let J=Symbol("TabsSSRContext"),$e=y({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:i,attrs:l,emit:d}){var o;let a=S((o=e.selectedIndex)!=null?o:e.defaultIndex),s=S([]),m=S([]),_=v(()=>e.selectedIndex!==null),b=v(()=>_.value?e.selectedIndex:a.value);function g(n){var t;let u=L(p.tabs.value,x),h=L(p.panels.value,x),P=u.filter(w=>{var E;return!((E=x(w))!=null&&E.hasAttribute("disabled"))});if(n<0||n>u.length-1){let w=N(a.value===null?0:Math.sign(n-a.value),{[-1]:()=>1,[0]:()=>N(Math.sign(n),{[-1]:()=>0,[0]:()=>0,[1]:()=>1}),[1]:()=>0});a.value=N(w,{[0]:()=>u.indexOf(P[0]),[1]:()=>u.indexOf(P[P.length-1])}),p.tabs.value=u,p.panels.value=h}else{let w=u.slice(0,n),E=[...u.slice(n),...w].find(ie=>P.includes(ie));if(!E)return;let W=(t=u.indexOf(E))!=null?t:p.selectedIndex.value;W===-1&&(W=p.selectedIndex.value),a.value=W,p.tabs.value=u,p.panels.value=h}}let p={selectedIndex:v(()=>{var n,t;return(t=(n=a.value)!=null?n:e.defaultIndex)!=null?t:null}),orientation:v(()=>e.vertical?"vertical":"horizontal"),activation:v(()=>e.manual?"manual":"auto"),tabs:s,panels:m,setSelectedIndex(n){b.value!==n&&d("change",n),_.value||g(n)},registerTab(n){var t;if(s.value.includes(n))return;let u=s.value[a.value];s.value.push(n),s.value=L(s.value,x);let h=(t=s.value.indexOf(u))!=null?t:a.value;h!==-1&&(a.value=h)},unregisterTab(n){let t=s.value.indexOf(n);t!==-1&&s.value.splice(t,1)},registerPanel(n){m.value.includes(n)||(m.value.push(n),m.value=L(m.value,x))},unregisterPanel(n){let t=m.value.indexOf(n);t!==-1&&m.value.splice(t,1)}};Q(ne,p);let j=S({tabs:[],panels:[]}),C=S(!1);z(()=>{C.value=!0}),Q(J,v(()=>C.value?null:j.value));let U=v(()=>e.selectedIndex);return z(()=>{ue([U],()=>{var n;return g((n=e.selectedIndex)!=null?n:e.defaultIndex)},{immediate:!0})}),de(()=>{if(!_.value||b.value==null||p.tabs.value.length<=0)return;let n=L(p.tabs.value,x);n.some((t,u)=>x(p.tabs.value[u])!==x(t))&&p.setSelectedIndex(n.findIndex(t=>x(t)===x(p.tabs.value[b.value])))}),()=>{let n={selectedIndex:a.value};return G(M,[s.value.length<=0&&G(we,{onFocus:()=>{for(let t of s.value){let u=x(t);if((u==null?void 0:u.tabIndex)===0)return u.focus(),!0}return!1}}),R({theirProps:{...l,...ce(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:n,slots:i,attrs:l,name:"TabGroup"})])}}}),Se=y({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:i,slots:l}){let d=q("TabList");return()=>{let o={selectedIndex:d.selectedIndex.value},a={role:"tablist","aria-orientation":d.orientation.value};return R({ourProps:a,theirProps:e,slot:o,attrs:i,slots:l,name:"TabList"})}}}),Pe=y({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-tabs-tab-${ee()}`}},setup(e,{attrs:i,slots:l,expose:d}){let o=q("Tab"),a=S(null);d({el:a,$el:a}),z(()=>o.registerTab(a)),te(()=>o.unregisterTab(a));let s=K(J),m=v(()=>{if(s.value){let t=s.value.tabs.indexOf(e.id);return t===-1?s.value.tabs.push(e.id)-1:t}return-1}),_=v(()=>{let t=o.tabs.value.indexOf(a);return t===-1?m.value:t}),b=v(()=>_.value===o.selectedIndex.value);function g(t){var u;let h=t();if(h===D.Success&&o.activation.value==="auto"){let P=(u=fe(a))==null?void 0:u.activeElement,w=o.tabs.value.findIndex(E=>x(E)===P);w!==-1&&o.setSelectedIndex(w)}return h}function p(t){let u=o.tabs.value.map(h=>x(h)).filter(Boolean);if(t.key===I.Space||t.key===I.Enter){t.preventDefault(),t.stopPropagation(),o.setSelectedIndex(_.value);return}switch(t.key){case I.Home:case I.PageUp:return t.preventDefault(),t.stopPropagation(),g(()=>F(u,T.First));case I.End:case I.PageDown:return t.preventDefault(),t.stopPropagation(),g(()=>F(u,T.Last))}if(g(()=>N(o.orientation.value,{vertical(){return t.key===I.ArrowUp?F(u,T.Previous|T.WrapAround):t.key===I.ArrowDown?F(u,T.Next|T.WrapAround):D.Error},horizontal(){return t.key===I.ArrowLeft?F(u,T.Previous|T.WrapAround):t.key===I.ArrowRight?F(u,T.Next|T.WrapAround):D.Error}}))===D.Success)return t.preventDefault()}let j=S(!1);function C(){var t;j.value||(j.value=!0,!e.disabled&&((t=x(a))==null||t.focus(),o.setSelectedIndex(_.value),ke(()=>{j.value=!1})))}function U(t){t.preventDefault()}let n=pe(v(()=>({as:e.as,type:i.type})),a);return()=>{var t;let u={selected:b.value},{id:h,...P}=e,w={ref:a,onKeydown:p,onMousedown:U,onClick:C,id:h,role:"tab",type:n.value,"aria-controls":(t=x(o.panels.value[_.value]))==null?void 0:t.id,"aria-selected":b.value,tabIndex:b.value?0:-1,disabled:e.disabled?!0:void 0};return R({ourProps:w,theirProps:P,slot:u,attrs:i,slots:l,name:"Tab"})}}}),Ae=y({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:i,attrs:l}){let d=q("TabPanels");return()=>{let o={selectedIndex:d.selectedIndex.value};return R({theirProps:e,ourProps:{},slot:o,attrs:l,slots:i,name:"TabPanels"})}}}),Oe=y({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-tabs-panel-${ee()}`},tabIndex:{type:Number,default:0}},setup(e,{attrs:i,slots:l,expose:d}){let o=q("TabPanel"),a=S(null);d({el:a,$el:a}),z(()=>o.registerPanel(a)),te(()=>o.unregisterPanel(a));let s=K(J),m=v(()=>{if(s.value){let g=s.value.panels.indexOf(e.id);return g===-1?s.value.panels.push(e.id)-1:g}return-1}),_=v(()=>{let g=o.panels.value.indexOf(a);return g===-1?m.value:g}),b=v(()=>_.value===o.selectedIndex.value);return()=>{var g;let p={selected:b.value},{id:j,tabIndex:C,...U}=e,n={ref:a,id:j,role:"tabpanel","aria-labelledby":(g=x(o.tabs.value[_.value]))==null?void 0:g.id,tabIndex:b.value?C:-1};return!b.value&&e.unmount&&!e.static?G(le,{as:"span",...n}):R({ourProps:n,theirProps:U,slot:p,attrs:i,slots:l,features:X.Static|X.RenderStrategy,visible:b.value,name:"TabPanel"})}}});const je={class:"lg:flex lg:items-center lg:justify-between pb-3 border-solid border-b border-gray-200 mb-4"},Ee={class:"min-w-0 flex-1"},Ce={class:"text-gray-700 sm:truncate sm:text-sm tracking-wide mb-2"},Fe={class:"flex flex-col sm:mt-0 sm:flex-row sm:flex-wrap sm:space-x-3"},Be={class:"bg-gray-200 dark:bg-gray-800 h-6 px-2 mb-4 md:mb-0 rounded-md flex items-center justify-center"},Ue={class:"flex items-center"},Le=r("span",{class:"text-xs text-gray-600 dark:text-gray-400 font-normal"},"Status",-1),Me=r("div",{class:"h-1 w-1 rounded-full bg-gray-600 dark:bg-gray-400 mx-1"},null,-1),Re={class:"text-xs text-gray-600 dark:text-gray-400 font-normal"},qe={class:"bg-gray-200 dark:bg-gray-800 h-6 px-2 mb-4 md:mb-0 rounded-md flex items-center justify-center"},De={class:"flex items-center"},Ne=r("span",{class:"text-xs text-gray-600 dark:text-gray-400 font-normal"},"Urgency",-1),Ge=r("div",{class:"h-1 w-1 rounded-full bg-gray-600 dark:bg-gray-400 mx-1"},null,-1),ze={class:"text-xs text-gray-600 dark:text-gray-400 font-normal"},Ve={class:"bg-gray-200 dark:bg-gray-800 h-6 px-2 mb-4 md:mb-0 rounded-md flex items-center justify-center"},We={class:"flex items-center"},He=r("span",{class:"text-xs text-gray-600 dark:text-gray-400 font-normal"},"Priority",-1),Ke=r("div",{class:"h-1 w-1 rounded-full bg-gray-600 dark:bg-gray-400 mx-1"},null,-1),Je={class:"text-xs text-gray-600 dark:text-gray-400 font-normal"},Qe={class:"flex items-center text-sm text-gray-500 tracking-wide"},Xe={class:"flex items-center text-sm text-gray-500 tracking-wide"},re=y({__name:"TicketItem",props:{ticket:{default:()=>({})}},setup(e){const i=e,{ticket:l}=i;return(d,o)=>{const a=ae("RouterLink");return f(),k(a,{to:`/tickets/${c(l).id}`},{default:$(()=>{var s;return[r("div",je,[r("div",Ee,[r("h2",Ce,A(c(l).title),1),r("div",Fe,[r("div",Be,[r("div",Ue,[Le,Me,r("span",Re,A(c(l).status),1)])]),r("div",qe,[r("div",De,[Ne,Ge,r("span",ze,A((s=c(l).urgency)==null?void 0:s.name),1)])]),r("div",Ve,[r("div",We,[He,Ke,r("span",Je,A(c(l).priority),1)])]),r("div",Qe,A(`Request time : ${c(l).created}`),1),r("div",Xe,A(`Modify time : ${c(l).updated}`),1)])])])]}),_:1},8,["to"])}}}),Ye={class:"h-full bg-gray-100 rounded-xl"},Ze={class:"relative h-96 overflow-hidden rounded-xl border border-dashed border-gray-400 opacity-75 flex justify-center align-middle"},et=r("svg",{class:"absolute inset-0 h-full w-full stroke-gray-900/10",fill:"none"},[r("defs",null,[r("pattern",{id:"pattern-4d2f8758-2f66-4332-9b69-ca19e9dfc001",x:"0",y:"0",width:"10",height:"10",patternUnits:"userSpaceOnUse"},[r("path",{d:"M-3 13 15-5M-5 5l18-18M-1 21 17 3"})])]),r("rect",{stroke:"none",fill:"url(#pattern-4d2f8758-2f66-4332-9b69-ca19e9dfc001)",width:"100%",height:"100%"})],-1),tt={class:"flex flex-col justify-center align-center"},at=r("p",{class:"font-thin self-center"},"There are currently no active requests to display",-1),oe=y({__name:"Empty",setup(e){return(i,l)=>(f(),B("div",Ye,[r("div",Ze,[et,r("div",tt,[O(c(me),{class:"h-20 w-20 text-gray-400 self-center mb-5","aria-hidden":"true"}),at])])]))}}),st=y({__name:"ClosedTickets",props:{tickets:{default:()=>[]},total:{default:()=>0}},setup(e){const i=e,{total:l,tickets:d}=i;return(o,a)=>c(l)?(f(!0),B(M,{key:0},V(c(d),s=>(f(),k(re,{key:s.id,ticket:s},null,8,["ticket"]))),128)):(f(),k(oe,{key:1}))}}),lt=y({__name:"OpenTickets",props:{tickets:{default:()=>[]},total:{default:()=>0}},setup(e){const i=e,{total:l,tickets:d}=i;return(o,a)=>c(l)?(f(!0),B(M,{key:0},V(c(d),s=>(f(),k(re,{key:s.id,ticket:s},null,8,["ticket"]))),128)):(f(),k(oe,{key:1}))}}),nt={class:"lg:flex lg:items-center lg:justify-between px-8 pb-12"},rt={class:"relative rounded-md shadow-sm"},ot=r("input",{type:"text",name:"search",id:"search",class:"block w-full rounded-md border-0 py-1.5 pl-10 pr-20 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"search..."},null,-1),it={class:"absolute inset-y-0 left-3.5 flex items-center"},ut={class:"mt-5 flex lg:ml-4 lg:mt-0"},dt=y({__name:"TicketsHeader",setup(e){const i=se(),l=v(()=>i.isUser);return(d,o)=>{const a=ae("RouterLink");return f(),B("div",nt,[r("div",rt,[ot,r("div",it,[O(c(xe),{class:"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400","aria-hidden":"true"})])]),r("div",ut,[c(l)?(f(),k(a,{key:0,to:"/tickets/incident/submit",type:"button",class:"inline-flex items-center rounded-md bg-white px-3 py-2 mr-8 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},{default:$(()=>[O(c(ve),{class:"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400","aria-hidden":"true"}),H(" Submit an Incident ")]),_:1})):Y("",!0),c(l)?(f(),k(a,{key:1,to:"/tickets/request/submit",type:"button",class:"inline-flex items-center rounded-md bg-white px-3 py-2 mr-4 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},{default:$(()=>[O(c(ge),{class:"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400","aria-hidden":"true"}),H(" Submit a Request ")]),_:1})):Y("",!0)])])}}}),ct={class:"bg-white mt-12 mx-auto max-w-7xl px-2 sm:px-6 lg:px-8"},pt={class:"inline-flex items-center justify-center w-3 h-3 p-3 ml-3 text-sm font-medium text-indigo-600 bg-blue-100 rounded-full dark:bg-indigo-900 dark:text-blue-300"},xt=y({__name:"index",setup(e){const i=be(),l=se(),d=v(()=>{var o,a,s,m;return[{id:0,title:((o=l.authUser)==null?void 0:o.role)==="Administrator"?"Open Tickets":"My Tickets",component:lt,tickets:i.openTickets,total:i.openTickets.length,show:((a=l.authUser)==null?void 0:a.role)==="Administrator"},{id:1,title:"Recently Closed",component:st,tickets:i.closedTickets,total:i.closedTickets.length,show:((s=l.authUser)==null?void 0:s.role)==="User"||((m=l.authUser)==null?void 0:m.role)==="Administrator"}]});return(o,a)=>(f(),k(he,null,{default:$(()=>[r("div",ct,[O(dt),O(c($e),null,{default:$(()=>[O(c(Se),{class:"flex px-7"},{default:$(()=>[(f(!0),B(M,null,V(c(d),s=>(f(),k(c(Pe),{as:"template",class:"flex",key:s.title},{default:$(({selected:m})=>[r("button",{class:Z(["outline-0 focus py-2 mx-2",m?"border-indigo-600 text-indigo-600":"border-transparent text-gray-700 hover:text-gray-800","relative z-10 -mb-px flex items-center border-b-2 pt-px text-sm font-medium transition-colors duration-200 ease-out"])},[H(A(s.title)+" ",1),r("span",pt,A(s.total),1)],2)]),_:2},1024))),128))]),_:1}),O(c(Ae),{class:"mt-2"},{default:$(()=>[(f(!0),B(M,null,V(c(d),s=>(f(),k(c(Oe),{key:s.id,class:Z(["rounded-xl bg-white p-8","ring-white ring-opacity-60 ring-offset-2 focus:outline-none focus:ring-2"])},{default:$(()=>[(f(),k(ye(s.component),{tickets:s.tickets,total:s.total},null,8,["tickets","total"]))]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1}))}});export{xt as default};
